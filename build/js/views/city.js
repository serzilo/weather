define(["collections/cities","common/index","common/forecast"],function(t,e,o){var a=Backbone.View.extend({template:_.template($("#city_template").html()),forecastTemplate:_.template($("#forecast_template").html()),events:{"click .js-bookmark_toggle":"bookmarkToggle","click .js-update_forecast":"forecastUpdate"},initialize:function(t){this.city=t},render:function(){e.toggleHeaderButtons(),e.setTitle("Forecast: "+this.city),$("#content").html(this.$el.html(this.template({city:this.city}))),this.forecastRequest()},forecastRequest:function(){var t=this,e=$(".js-update_forecast");e.addClass("active"),o.getForecast(this.city,function(o){console.dir(o),t.$("#city_forecast").html(t.forecastTemplate(o)),e.removeClass("active")})},forecastUpdate:function(t){t.preventDefault(),t.stopPropagation(),this.forecastRequest()},bookmarkToggle:function(t){t.preventDefault(),t.stopPropagation(),console.log(1)}});return a});