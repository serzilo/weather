define(["collections/cities","common/index"],function(t,e){var i=Backbone.View.extend({template:_.template($("#list_template").html()),blockTemplate:_.template($("#block_template").html()),listLinkTemplate:_.template($("#list_link_template").html()),events:{"mouseover #cities_list_ul li":"listItemHighlight","mouseout #cities_list_ul li":"listItemRemoveHighlight"},itemClass:"list__item",activeClass:"list__item_active",initialize:function(){this.listenTo(t,"reset",this.fillList)},render:function(){e.toggleHeaderButtons("index"),e.setTitle("My cities"),$("#content").html(this.$el.html(this.template())),this.$list=this.$("#cities_list_ul"),t.fetch({reset:!0})},fillList:function(){var e="";if(t.length){var i=this;e=t.map(function(t){return i.listLinkTemplate(t.toJSON())}).join("")}else e=this.blockTemplate({text:'Your cities list is empty. Please, use a <a href="#/search/">search</a>.',centeredContent:!0});this.$list.html(e)},listItemRemoveHighlight:function(t){this.$list.find("."+this.itemClass).removeClass(this.activeClass)},listItemHighlight:function(t){this.listItemRemoveHighlight(t),$(t.currentTarget).addClass(this.activeClass)}});return i});